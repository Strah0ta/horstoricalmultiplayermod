###########################
#stability events
###########################

add_namespace = stability

#low stability selector event, hidden
country_event = {
	id = stability.3
	title = stability.3.t	
	desc = stability.3.desc	#
	picture = GFX_					# 
	
	hidden = yes

	trigger = {
		date > 1939.9.1
		OR = {	has_stability < 0.5 }
		NOT = { 
			has_country_flag = crisis_in_progress
		}
	}

	mean_time_to_happen = { 
		days = 360 
		modifier = {
			factor = 2
			NOT = { has_government = democratic }
		}
		modifier = {
			factor = 0.75
			has_stability < 0.4
		}
		modifier = {
			factor = 0.75
			has_stability < 0.2
		}
	}

	immediate = { 
		random_list = {
			20 = { 
				modifier = {
					factor = 0
					has_country_flag = strikes_resolved
				}
				modifier = {
					factor = 0.1
					has_stability > 0.5
				}
				add_ideas = strikes_1 
				country_event = stability.22
			} #strikes
		}
		if = {
			limit = {
				NOT = {
					has_country_flag = crisis_in_progress
				}
			}
			set_country_flag = crisis_in_progress
		}
	}
	
	option = { 
		name = stability.3.a
		ai_chance = {
			
		}
		
	}

}

#strikes
country_event = {
	id = stability.22
	title = stability.22.t	
	desc = {
		text = stability.22.desc.a
		trigger = { 		 
			has_idea = strikes_1
		}	
	} 	
	desc = {
		text = stability.22.desc.b
		trigger = { has_idea = strikes_2 }
	}
	desc = {
		text = stability.22.desc.c
		trigger = { has_idea = strikes_3 }
	}	#
	picture = GFX_report_event_worker_protests					# 
		
	is_triggered_only = yes

	immediate = {
		if = {
			limit = {
				has_country_flag = crisis_solution_in_progress
			}
			clr_country_flag = crisis_solution_in_progress
		}
	}
	
	option = { 
		name = stability.22.a #nothing to be done
		ai_chance = {
			base = 0
		}
		 
	}
	option = { 
		trigger = {
			has_idea = strikes_1
		}
		name = stability.22.b #violence - level 1
		ai_chance = {
			base = 50
			modifier = {
				has_stability < 0.4
				factor = 0
			}
			modifier = {
				has_political_power > 100
				factor = 0.5
			}
		}
		custom_effect_tooltip = 30_days_tt
		set_country_flag = crisis_solution_in_progress
		add_political_power = -75 
		country_event = { id = strikes_event.1 days = 30 }#success
	}
	option = { 
		name = stability.22.c #negotiations - level 1
		trigger = {
			has_idea = strikes_1
		}
		custom_effect_tooltip = 45_days_tt
		set_country_flag = crisis_solution_in_progress
		ai_chance = {
			base = 50
			modifier = {
				has_stability < 0.4
				factor = 2
			}
			modifier = {
				has_political_power > 100
				factor = 2
			}
		}
		add_political_power = -125 
		country_event = { id = strikes_event.3 days = 45 } 
	}
	option = { 
		trigger = {
			has_idea = strikes_2
		}
		name = stability.22.e #negotiations - level 2
		custom_effect_tooltip = 45_days_tt
		ai_chance = {
			base = 50
			modifier = {
				has_stability < 0.4
				factor = 2
			}
			modifier = {
				has_political_power > 100
				factor = 2
			}
		}
		add_political_power = -135 
		set_country_flag = crisis_solution_in_progress
		country_event = { id = strikes_event.6 days = 45 }#success
	}
	option = { 
		trigger = {
			has_idea = strikes_3
		}
		name = stability.22.g #negotiations - level 3
		ai_chance = {
			base = 50
			modifier = {
				has_stability < 0.4
				factor = 2
			}
			modifier = {
				has_political_power > 100
				factor = 2
			}
		}
		custom_effect_tooltip = 45_days_tt
		set_country_flag = crisis_solution_in_progress
		add_political_power = -145 
		country_event = { id = strikes_event.9 days = 45 }#success

	}

}


add_namespace = strikes_event

#military crackdown response to strikes - success
country_event = {
	id = strikes_event.1
	title = strikes_event.1.t	
	desc = strikes_event.1.desc	#
	picture = GFX_report_event_generic_military_parade					# 
		
	is_triggered_only = yes
	
	option = { 
		name = strikes_event.1.a
		remove_ideas =  { 
			strikes_1 
			strikes_2
			strikes_3
		}
		clr_country_flag = crisis_in_progress
		clr_country_flag = crisis_solution_in_progress
		set_country_flag = { flag = strikes_resolved days = 90 }
	}

}

#strikes negotiations - success
country_event = {
	id = strikes_event.3
	title = strikes_event.3.t	
	desc = strikes_event.3.desc	#
	picture = GFX_report_event_generic_factory					# 
		
	is_triggered_only = yes
	
	option = { 
		name = strikes_event.3.a
		if = { limit = { OR = {  has_idea = strikes_1 has_idea = strikes_2 has_idea = strikes_3 }    } 
		clr_country_flag = crisis_in_progress
		add_stability = 0.05
		clr_country_flag = crisis_solution_in_progress
		set_country_flag = { flag = strikes_resolved days = 180 }
			remove_ideas =  { 
			strikes_1 
			strikes_2
			strikes_3
		}
		}
	}
}
#military crackdown response to strikes_2 - success
country_event = {
	id = strikes_event.4
	title = strikes_event.4.t	
	desc = strikes_event.4.desc	#
	picture = GFX_report_event_generic_lend_lease					# 
		
	is_triggered_only = yes
	
	option = { 
		name = strikes_event.4.a
		remove_ideas =  { 
			strikes_1 
			strikes_2
			strikes_3
		}
		clr_country_flag = crisis_in_progress
		clr_country_flag = crisis_solution_in_progress
		set_country_flag = { flag = strikes_resolved days = 90 }
	}

}


#strikes_2 negotiations - success
country_event = {
	id = strikes_event.6
	title = strikes_event.6.t	
	desc = strikes_event.6.desc	#
	picture = GFX_report_event_tank_factory					# 
		
	is_triggered_only = yes
	
	option = { 
		name = strikes_event.6.a
			if = { limit = { OR = {  has_idea = strikes_1 has_idea = strikes_2 has_idea = strikes_3 }    } 

		clr_country_flag = crisis_in_progress
		add_stability = 0.05
		clr_country_flag = crisis_solution_in_progress
		set_country_flag = { flag = strikes_resolved days = 180 }
		
			remove_ideas =  { 
			strikes_1 
			strikes_2
			strikes_3
		}
		}
	}

}
#military crackdown response to strikes_3 - success
country_event = {
	id = strikes_event.7
	title = strikes_event.7.t	
	desc = strikes_event.7.desc	#
	picture = GFX_report_event_polish_tanks_01					# 
		
	is_triggered_only = yes
	
	option = { 
		name = strikes_event.7.a
		remove_ideas =  { 
			strikes_1 
			strikes_2
			strikes_3
		}
		clr_country_flag = crisis_in_progress
		clr_country_flag = crisis_solution_in_progress
		set_country_flag = { flag = strikes_resolved days = 90 }
	}

}


#strikes_3 negotiations - success
country_event = {
	id = strikes_event.9
	title = strikes_event.9.t	
	desc = strikes_event.9.desc	#
	picture = GFX_report_event_generic_sign_treaty2					# 
		
	is_triggered_only = yes
	
	option = { 
		name = strikes_event.9.a
			if = { limit = { OR = {  has_idea = strikes_1 has_idea = strikes_2 has_idea = strikes_3 }    } 

		clr_country_flag = crisis_in_progress
		add_stability = 0.05
		clr_country_flag = crisis_solution_in_progress
		set_country_flag = { flag = strikes_resolved days = 180 }
			remove_ideas =  { 
			strikes_1 
			strikes_2
			strikes_3
		}
		}
	}

}