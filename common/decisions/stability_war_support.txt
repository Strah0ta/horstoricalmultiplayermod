crisis = {
	strikes_1 = {
		icon = generic_civil_support
		allowed = { normally_played_country = yes } 
		available = {
			has_country_flag = crisis_in_progress
			NOT = {	has_country_flag = crisis_solution_in_progress	}
			OR = {
				has_idea = strikes_1
				has_idea = strikes_2
				has_idea = strikes_3
			}
		}
		cost = 0
		visible = {
			OR = {
				has_idea = strikes_1
				has_idea = strikes_2
				has_idea = strikes_3
			}
				has_country_flag = crisis_in_progress
			NOT = {
				has_country_flag = crisis_solution_in_progress
			}
		}
		complete_effect = {
			country_event = stability.22
		}
	}
	strikes_mission = {

		icon = generic_civil_support
		
		available = {
			NOT = {
				OR = {
					has_idea = strikes_1
					has_idea = strikes_2
					has_idea = strikes_3
				}
				has_country_flag = crisis_in_progress
			}
		}
		
	allowed = { normally_played_country = yes } 


		days_mission_timeout = 90

		activation = {
			OR = {
				has_idea = strikes_1
				has_idea = strikes_2
				has_idea = strikes_3
			}
				has_country_flag = crisis_in_progress #needed to avoid doubling up with demob strikes
		}
		visible = {
			OR = {
				has_idea = strikes_1 
				has_idea = strikes_2
				has_idea = strikes_3	
			}
		has_country_flag = crisis_in_progress
		}
		complete_effect = {
			
		}
		timeout_effect = {

			if = {
				limit = {
					has_idea = strikes_3
					has_stability < 0.41
					NOT = {
						has_government = communism
					}
				}
				add_popularity = { ideology = communism popularity = 0.1}
			}
			if = {
				limit = {
					has_idea = strikes_3
					has_stability < 0.41
					has_government = communism
					
				}
				add_popularity = { ideology = democratic popularity = 0.1}
			}
			if = {
				limit = {
					has_idea = strikes_3
					has_stability > 0.4
				}
				add_stability = -0.1
			}
			if = {
				limit = { 
					has_idea = strikes_2
				}
				swap_ideas = {
					remove_idea = strikes_2
					add_idea = strikes_3
				}
			}
			if = {
				limit = { 
					has_idea = strikes_1
				}
				swap_ideas = {
					remove_idea = strikes_1
					add_idea = strikes_2
				}
			}	
		}
	}
}
demobilization = {
	demobilization_economic = {

		icon = generic_industry
		
		is_good = no

		available = {
			has_unsupported_economic_law = yes
			has_war = no
		}
		
	allowed = { normally_played_country = yes } 


		activation = {
			has_unsupported_economic_law = yes
			has_war = no
		}
		cost = 50

		visible = {
					date > 1937.1.1

			has_war = no
			has_unsupported_economic_law = yes
		}
		complete_effect = {
			if = {
				limit = {
					has_war_support < 0.15
				}
				add_ideas = civilian_economy
			}
			else_if = {
				limit = {
					has_war_support < 0.25
				}
				add_ideas = low_economic_mobilisation
			}
			else_if = {
				limit = {
					has_war_support < 0.5
				}
				add_ideas = partial_economic_mobilisation
			}
			else_if = {
				limit = {
					has_war_support < 0.8
				}
				add_ideas = war_economy
			}
			if = {
				limit = {
					has_idea = strikes_1
				}
				remove_ideas = strikes_1
			}
			if = {
				limit = {
					has_idea = strikes_2
				}
				remove_ideas = strikes_2
			}
			if = {
				limit = {
					has_idea = strikes_3
				}
				remove_ideas = strikes_3
			}
		}
		ai_will_do = {
			factor = 500 #should really get on this
		}
		
	}
	demob_economic_mission = {
		available = {
			OR = {
				has_unsupported_economic_law = no
				has_war = yes
			}
		}
	allowed = { normally_played_country = yes } 


		activation = {
			has_unsupported_economic_law = yes
			has_war = no
						date > 1937.1.1
		}
		icon = revolt
		is_good = no
		days_mission_timeout = 120
		complete_effect = {
			if = {
				limit = {
					has_idea = strikes_1
				}
				remove_ideas = strikes_1
			}
			if = {
				limit = {
					has_idea = strikes_2
				}
				remove_ideas = strikes_2
			}
			if = {
				limit = {
					has_idea = strikes_3
				}
				remove_ideas = strikes_3
			}
		}
		timeout_effect = {
			activate_mission = demob_economic_mission

			if = {
				limit = {
					has_idea = strikes_3
					has_stability < 0.41
					NOT = {
						has_government = communism
					}
				}
				add_popularity = { ideology = communism popularity = 0.1}
			}
			if = {
				limit = {
					has_idea = strikes_3
					has_stability < 0.41
					has_government = communism
					
				}
				add_popularity = { ideology = democratic popularity = 0.1}
			}
			if = {
				limit = {
					has_idea = strikes_3
					has_stability > 0.4
				}
				add_stability = -0.1
			}
			if = {
				limit = { 
					has_idea = strikes_2
				}
				swap_ideas = {
					remove_idea = strikes_2
					add_idea = strikes_3
				}
			}
			if = {
				limit = { 
					has_idea = strikes_1
				}
				swap_ideas = {
					remove_idea = strikes_1
					add_idea = strikes_2
				}
			}
			if = {
				limit = { 
					NOT = { 
						OR = {
							has_idea = strikes_1
							has_idea = strikes_2
							has_idea = strikes_3
						}
					}
				}
				add_ideas = strikes_1
			}	
		}
	}
}